<!DOCTYPE html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta charset="UTF-8">
	<title>Telegram redirector</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<style type="text/css">%CSS%</style>
	
</head>
<body>
	<div id="outer">
		<div id="inner">
			<a href="tg://resolve?domain=design_labodina_blog" id="active_link" class="btn" role="button" aria-pressed="true">Open in Telegram</a>
			<div id="timer" class="mt-5">
				Redirecting....
			</div>
		</div>
	</div>

<script>
	var count = +'%COUNTER%';

	var redirectlink = "";
	var link = document.getElementById("active_link");
	var location = document.location.pathname

	if(location.indexOf('/joinchat/') != -1) {
		var chat = location.replace('/joinchat/', '')
		var redirectlink = "tg://" + "join?invite="+ chat;
		link.innerHTML = 'Join chat in Telegram'
	} else {
		var domain = location.replace('/', '')
		var redirectlink = "tg://" + "resolve?domain="+ domain;
	}
	
	link.href = redirectlink

	function counter() {
		var timer = document.getElementById("timer");

		if (count > 0) {
			count--;
			timer.innerHTML = "You will be redirected in  " + count + " sec.";
			setTimeout(counter, 1000);
		} else {
			window.location.href = redirectlink;
			timer.innerHTML = "Redirecting...";
		}
	}

	counter()
</script>
</body>
</html>