<!DOCTYPE html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta charset="UTF-8">
	<title>Telegram redirector</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<style type="text/css">%CSS%</style>
</head>
<body>
	<div id="outer">
		<div id="inner">
			<script>
			console.log('Made by https://spartak.io', 'Github page https://github.com/mrspartak/tg-redirect');
			function convert(){
				var website = document.location.host;
				var value = document.getElementById("inputUrl").value;
				if(!value) return alert('No link provided');
				value = value.trim().toLocaleLowerCase();
				baseValue = value;

				if(value.indexOf('t.me') == -1 && value.indexOf('@') == -1) return alert('Wrong link');

				var baseScheme = false;
				if(value.indexOf('http://') != -1) baseScheme = 'http://';
				if(value.indexOf('https://') != -1) baseScheme = 'https://';

				var currentScheme = document.location.protocol +'//';

				var value = value.replace("t.me", website).replace("@", currentScheme + website +"/");
				if(baseScheme) value = value.replace(baseScheme, currentScheme);
				else if(baseValue.indexOf('t.me') != -1) value = currentScheme + value;

				document.getElementById("inputUrl").value = value;

				var link = document.getElementById("active_link");
				link.href = value;
				link.className = 'btn display-block mt-15';
			}
			</script>

			<input type="inputUrl" id="inputUrl" placeholder="t.me/.." required="" autofocus="">
			<button class="" onclick="convert()" type="button">Convert</button>
			<a class="hidden" id="active_link">Link</a>
		</div>
	</div>
</body>
</html>