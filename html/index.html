<!DOCTYPE html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta charset="UTF-8">
	<title>Telegram redirector</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<style type="text/css">%CSS%</style>
</head>
<body>
	<div id="outer">
		<div id="inner">
			<script>
			console.log('Made by https://spartak.io', 'Github page https://github.com/mrspartak/tg-redirect');
			function convert(){
				var error = document.getElementById("error");
				var website = document.location.host;
				var value = document.getElementById("inputUrl").value;
				if(!value) {
					error.className = 'text-error';
					error.innerHTML = 'No link provided';
					return;
				}
				value = value.trim().toLocaleLowerCase();
				baseValue = value;

				if(value.indexOf('t.me') == -1 && value.indexOf('@') == -1) {
					error.className = 'text-error';
					error.innerHTML = 'Wrong link format';
					return;
				}

				error.className = 'hidden';

				var baseScheme = false;
				if(value.indexOf('http://') != -1) baseScheme = 'http://';
				if(value.indexOf('https://') != -1) baseScheme = 'https://';

				var currentScheme = document.location.protocol +'//';

				var value = value.replace("t.me", website).replace("@", currentScheme + website +"/");
				if(baseScheme) value = value.replace(baseScheme, currentScheme);
				else if(baseValue.indexOf('t.me') != -1) value = currentScheme + value;

				document.getElementById("inputUrl").value = value;

				var link = document.getElementById("active_link");
				link.href = value;
				link.className = 'btn display-block mt-15';
			}
			</script>

			<h3>We support:</h3>
			<p>User/Channel <b>https://t.me/user</b></p>
			<p>Short syntax <b>@user</b></p>
			<p>Post <b>https://t.me/user/10</b></p>
			<p>Chat <b>https://t.me/joinchat/lofh3p2fh</b></p>
			<p>Sticker <b>https://t.me/addstickers/random</b></p>

			<input type="inputUrl" id="inputUrl" placeholder="t.me/.." required="" autofocus="" class="mt-15">
			<button class="" onclick="convert()" type="button">Convert</button>
			<span class="hidden" id="error"></span>
			<a class="hidden" id="active_link">Link</a>

			<div class="contact">
				Contact: <a href="tg://resolve?domain=catrps">@catrps</a><br>
				<a href="https://github.com/mrspartak/tg-redirect" target="_blank">Github</a>
			</div>
		</div>
	</div>
</body>
</html>